Version 4
SHEET 1 1668 2336
WIRE -128 -496 -128 -512
WIRE -128 -400 -128 -416
WIRE 864 -192 864 -256
WIRE 256 -96 256 -144
WIRE 864 -64 864 -112
WIRE 864 -64 608 -64
WIRE 608 -32 608 -64
WIRE 864 -16 864 -64
WIRE 256 64 256 -16
WIRE 688 64 256 64
WIRE 816 64 768 64
WIRE 864 112 864 80
WIRE 32 256 32 208
WIRE 864 256 864 192
WIRE 864 256 32 256
WIRE 944 256 864 256
WIRE 1072 256 1008 256
WIRE 1120 256 1072 256
WIRE 1072 304 1072 256
WIRE 32 336 32 256
WIRE -288 384 -352 384
WIRE -16 384 -288 384
WIRE -288 432 -288 384
WIRE 1072 448 1072 384
WIRE 256 480 256 64
WIRE 864 480 864 256
WIRE -288 560 -288 512
WIRE 0 560 0 432
WIRE 80 560 0 560
WIRE 208 560 160 560
WIRE 480 560 432 560
WIRE 608 560 608 32
WIRE 608 560 560 560
WIRE 688 560 608 560
WIRE 816 560 768 560
WIRE 0 608 0 560
WIRE 432 624 432 560
WIRE 864 624 864 576
WIRE 0 720 0 688
WIRE 112 768 64 768
WIRE 256 768 256 576
WIRE 432 768 432 704
WIRE 864 768 864 704
WIRE 0 880 0 816
WIRE 272 944 208 944
WIRE 400 944 336 944
WIRE 464 944 400 944
WIRE 592 944 544 944
WIRE 400 1088 400 944
WIRE 400 1088 336 1088
WIRE 112 1104 112 768
WIRE 208 1104 208 944
WIRE 208 1104 112 1104
WIRE 272 1104 208 1104
WIRE 400 1120 336 1120
WIRE 400 1168 400 1120
WIRE 400 1280 400 1248
FLAG -128 -400 0
FLAG -288 560 0
FLAG -128 -512 ht
IOPIN -128 -512 Out
FLAG 0 880 0
FLAG -352 384 in
IOPIN -352 384 In
FLAG 256 768 0
FLAG 1072 448 0
FLAG 1120 256 out
IOPIN 1120 256 Out
FLAG 256 -144 ht
IOPIN 256 -144 In
FLAG 864 768 0
FLAG 864 -256 ht
IOPIN 864 -256 In
FLAG 432 768 0
FLAG 32 208 p
FLAG 400 1280 0
FLAG 592 944 p
SYMBOL voltage -128 -512 R0
SYMATTR InstName V1
SYMATTR Value {HT}
SYMBOL voltage -288 416 R0
SYMATTR InstName V2
SYMATTR Value SINE(0 0.1 {Fin})
SYMATTR Value2 AC 1
SYMBOL Misc/triode 32 384 R0
SYMATTR InstName U3
SYMATTR Value 6SN7
SYMBOL cap 1008 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL res 1056 288 R0
SYMATTR InstName R2
SYMATTR Value 32
SYMBOL nmos 208 480 R0
SYMATTR InstName M1
SYMATTR Value irf640
SYMATTR Prefix X
SYMBOL res 176 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL nmos 816 480 R0
SYMATTR InstName M2
SYMATTR Value irf640
SYMATTR Prefix X
SYMBOL nmos 816 -16 R0
SYMATTR InstName M3
SYMATTR Value irf640
SYMATTR Prefix X
SYMBOL res 848 96 R0
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL res 848 608 R0
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL res 848 -208 R0
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL cap 592 -32 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 576 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1Meg
SYMBOL voltage 432 608 R0
SYMATTR InstName V4
SYMATTR Value 4.2
SYMBOL current 256 -96 R0
SYMATTR InstName I1
SYMATTR Value 10m
SYMBOL res 784 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res 784 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL Opamps/opamp 304 1040 M0
SYMATTR InstName U1
SYMBOL cap 336 928 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL res 560 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1Meg
SYMBOL npn 64 720 M0
SYMATTR InstName Q1
SYMATTR Value BC550C
SYMBOL voltage 400 1152 R0
SYMATTR InstName V3
SYMATTR Value {HT/2}
SYMBOL voltage 0 592 R0
SYMATTR InstName V5
SYMATTR Value 0
TEXT -448 -544 Left 2 !.inc 6SN7.inc\n.inc sihf640.lib\n.inc opamp.sub\n.options plotwinsize=0\n.option numdgt=7\n.param Fin = 1k\n.tran 0 100ms 0 1u\n.four {Fin} V(out)
TEXT -8 -504 Left 2 !.param HT=180
