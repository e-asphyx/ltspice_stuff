Version 4
SHEET 1 1124 1488
WIRE 336 -96 336 -112
WIRE 544 -96 544 -112
WIRE 336 0 336 -16
WIRE 544 0 544 -16
WIRE 784 528 784 464
WIRE 64 656 64 464
WIRE 784 656 784 608
WIRE 784 656 528 656
WIRE 352 672 352 608
WIRE 16 704 -48 704
WIRE 784 704 784 656
WIRE 32 784 32 752
WIRE 224 784 32 784
WIRE 352 784 352 752
WIRE 352 784 288 784
WIRE 608 784 352 784
WIRE 736 784 688 784
WIRE 352 816 352 784
WIRE 32 832 32 784
WIRE 784 832 784 800
WIRE -48 944 -48 704
WIRE 32 944 32 912
WIRE 32 944 -48 944
WIRE 352 944 352 896
WIRE 32 976 32 944
WIRE -272 1024 -336 1024
WIRE -16 1024 -272 1024
WIRE 224 1024 192 1024
WIRE 784 1024 784 912
WIRE 784 1024 288 1024
WIRE 864 1024 784 1024
WIRE 992 1024 928 1024
WIRE 1040 1024 992 1024
WIRE -272 1072 -272 1024
WIRE 992 1120 992 1024
WIRE 528 1136 528 656
WIRE 0 1152 0 1072
WIRE 784 1184 784 1024
WIRE -272 1200 -272 1152
WIRE 0 1264 0 1232
WIRE 400 1264 352 1264
WIRE 528 1264 528 1200
WIRE 528 1264 480 1264
WIRE 608 1264 528 1264
WIRE 736 1264 688 1264
WIRE 992 1264 992 1200
WIRE 352 1328 352 1264
WIRE 784 1328 784 1280
WIRE 352 1472 352 1408
WIRE 784 1472 784 1408
FLAG 336 0 0
FLAG -272 1200 0
FLAG 336 -112 vcc
IOPIN 336 -112 Out
FLAG -336 1024 in
IOPIN -336 1024 In
FLAG 992 1264 0
FLAG 1040 1024 out
IOPIN 1040 1024 Out
FLAG 784 464 vcc
IOPIN 784 464 In
FLAG 64 464 ht
IOPIN 64 464 In
FLAG 352 1472 0
FLAG 784 1472 0
FLAG 352 944 0
FLAG 352 608 vcc
IOPIN 352 608 In
FLAG 544 0 0
FLAG 544 -112 ht
IOPIN 544 -112 Out
FLAG 0 1264 0
SYMBOL voltage 336 -112 R0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL voltage -272 1056 R0
SYMATTR InstName V2
SYMATTR Value SINE(0 0.1 {Fin})
SYMATTR Value2 AC 1
SYMBOL cap 928 1008 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL res 976 1104 R0
SYMATTR InstName R1
SYMATTR Value 32
SYMBOL nmos 736 1184 R0
SYMATTR InstName M1
SYMATTR Value irf640
SYMATTR Prefix X
SYMBOL nmos 736 704 R0
SYMATTR InstName M2
SYMATTR Value irf640
SYMATTR Prefix X
SYMBOL res 768 816 R0
SYMATTR InstName R2
SYMATTR Value {Rs}
SYMBOL res 768 1312 R0
SYMATTR InstName R3
SYMATTR Value {Rs}
SYMBOL res 768 512 R0
SYMATTR InstName R4
SYMATTR Value 1.1
SYMBOL cap 512 1136 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 496 1248 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1Meg
SYMBOL voltage 352 1312 R0
SYMATTR InstName V3
SYMATTR Value 4.2
SYMBOL res 704 1248 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL res 704 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL Misc/triode 32 1024 R0
SYMATTR InstName U1
SYMATTR Value 6SN7
SYMBOL res 336 656 R0
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMBOL res 336 800 R0
SYMATTR InstName R9
SYMATTR Value 1Meg
SYMBOL cap 288 768 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL cap 288 1008 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL voltage 544 -112 R0
SYMATTR InstName V4
SYMATTR Value {HT}
SYMBOL Misc/triode 64 704 R0
SYMATTR InstName U2
SYMATTR Value 6SN7
SYMBOL res 16 816 R0
SYMATTR InstName R10
SYMATTR Value {Rk}
SYMBOL res -16 1136 R0
SYMATTR InstName R11
SYMATTR Value {Rk}
TEXT 16 -144 Left 2 !.inc 6SN7.inc\n.inc sihf640.lib\n.inc opamp.sub\n.options plotwinsize=0\n.option numdgt=7\n.param Fin = 1k\n.tran 0 10ms 0 1u\n.four {Fin} V(out)\n*.ac dec 100 1 100k
TEXT 896 832 Left 2 !.param Rs=0.22
TEXT -528 808 Left 2 !.param Rk=810
TEXT -144 264 Left 2 !.step param HT 150 350 20
